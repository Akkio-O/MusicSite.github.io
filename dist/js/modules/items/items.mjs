export let selectedCategory="";export let selectedSubcategory="";export let selectedSubSubcategory="";export const itemsBlock=document.querySelector(".catalog_block");export const paginationBlock=document.querySelector("#pagination");export const notesOnPage=12;export let items=[];export let currentPageIndex=1;export const maxVisiblePages=6;export const itemsPerPage=12;export let maxVisibleButtons=6;export let active=null;export let sortOrderAsc=!0;export let totalNumPagination=0;export function categoryItem(t){const e=document.createElement("div");e.classList.add("col-auto","col-xxl-3.5");let a=100-100*t.CV_PRICE_13/t.CV_PRICE_18;return e.innerHTML=`\n    <div class="catalog_content text-center" data-XML_ID="${t.IE_XML_ID}">\n        <div class="catalog-item" data-itemcategory="${t.IC_GROUP0}" data-itemsubcategories="${t.IC_GROUP1}" data-itemsubSubcategories="${t.IC_GROUP2}">\n            <div class="catalog-item__wrapper">\n                <div class="catalog-item__content catalog-item__content_active">\n                    <img src="${t.IE_DETAIL_PICTURE}" alt="${t.IE_NAME}" class="catalog-item__img">\n                </div>\n            </div>\n            <div class="catalog-item__footer_block">\n            <div class="catalog-item__subtitle">${t.IE_NAME}</div>\n                <hr>\n                <div class="catalog-item__footer">\n                    <div class="catalog-item__prices easynetshop-cur-old-price">\n                        <div class="catalog-item__old-price">${t.CV_PRICE_18||" "}</div>\n                        ${t.CV_PRICE_18?`<span class="discount">${parseInt(a)}%</span>`:""}\n                        <div data-price="${parseFloat(t.CV_PRICE_13)}" class="catalog-item__price">${t.CV_PRICE_13||" "} ₽</div>\n                    </div>\n                    <button class="add-to-cart catalog-item__btn" data-buy="buy_items">Добавить</button>\n                </div>\n                <a href="/category/products/${t.IC_GROUP0}/${t.IC_GROUP1}${t.IC_GROUP2?"/"+t.IC_GROUP2:""}/${encodeURIComponent(t.IE_NAME)}" target="_blank"><button class="catalog-item__link">Подробнее</button></a>\n            </div>\n        </div>\n    </div>\n`,e}export function filterItems(t,e,a,n){return n.filter((n=>t&&n.IC_GROUP0===t||e&&n.IC_GROUP1===e||a&&n.IC_GROUP2===a||e&&n.IC_GROUP0===t||a&&n.IC_GROUP0===t&&n.IC_GROUP1===e))}export function updatePaginationVisibility(t,e){const a=Math.ceil(e.length/itemsPerPage);t=Math.min(t,a-1);const n=Math.floor(maxVisibleButtons/2);let i=t-n,o=t+n;i=Math.max(0,Math.min(i,a-maxVisibleButtons)),o=Math.min(a,i+maxVisibleButtons),items.forEach(((t,e)=>{t.style.display=e+1>=i&&e<o?"":"none"}))}export function handlePaginationClick(t,e){const a=paginationBlock.querySelector(".active");a&&a.classList.remove("active"),t.classList.add("active");let n,i=+t.innerHTML,o=window.location.search,c=`page=${i}`;n=o.includes("page=")?o.replace(/page=\d+/,c):o?o+`&${c}`:`?${c}`,window.history.pushState({page:i},"",n);let s=(i-1)*notesOnPage,l=e.slice(),r=s+notesOnPage,d=l.slice(s,r);itemsBlock.querySelectorAll(".col-auto").forEach((t=>t.remove()));for(let t of d)if(!itemsBlock.querySelector(`[data-XML_ID="${t.IE_XML_ID}"]`)){const e=categoryItem(t);paginationBlock.parentNode.insertBefore(e,paginationBlock)}updatePaginationVisibility(i-1,e)}export function setupPagination(t){const{page:e}=getUrlParams();items=[],paginationBlock.innerHTML="";const a=Math.ceil(t.length/itemsPerPage);totalNumPagination=a;const n=document.createElement("li");n.classList.add("pagination-start"),n.classList.add("pagination-number"),n.innerHTML="начало",paginationBlock.appendChild(n),n.addEventListener("click",(()=>{handlePaginationClick(items[0],t)}));for(let n=1;n<=a;n++){const a=document.createElement("li");a.classList.add("pagination-number"),a.innerHTML=n,paginationBlock.appendChild(a),items.push(a),n===e&&a.classList.add("active"),a.addEventListener("click",(()=>{handlePaginationClick(a,t)}))}const i=document.createElement("li");i.classList.add("pagination-end"),i.classList.add("pagination-number"),i.innerHTML="Конец",paginationBlock.appendChild(i),i.addEventListener("click",(()=>{handlePaginationClick(items[items.length-1],t)})),updatePaginationVisibility(e-1,t)}export function renderPage(t,e){const a=(t-1)*itemsPerPage,n=Math.min(a+itemsPerPage,e.length);for(let t=a;t<n;t++){const a=categoryItem(e[t]);itemsBlock.insertBefore(a,paginationBlock)}}export function getUrlParams(){const t=new URLSearchParams(window.location.search).get("page");return{page:t?parseInt(t):1}}